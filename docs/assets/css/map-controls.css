.leaflet-container .ms-marker:hover { transform: scale(1.15); box-shadow: 0 1px 6px rgba(0,0,0,0.35); }
    .ms-marker {
      width: 26px;
      height: 26px;
      border-radius: 50%;
      position: relative;
      box-shadow: 0 0 0 rgba(0,0,0,0);
      transition: transform 0.12s ease, box-shadow 0.12s ease;
      outline: 2px solid var(--ms-status-color, #9e9e9e);
      outline-offset: 2px;
      background: var(--ms-marker-fill, #cccccc);
    }
    .gb-report-link {
      display: inline-block;
      padding: 6px 10px;
      border-radius: 6px;
      border: 1px solid #1976d2;
      background: #1976d2;
      color: #fff;
      text-decoration: none;
    }
    .leaflet-popup-content a.gb-report-link,
    .leaflet-popup-content a.gb-report-link:visited,
    .leaflet-popup-content a.gb-report-link:hover,
    .leaflet-popup-content a.gb-report-link:focus,
    .leaflet-popup-content a.gb-report-link:active {
      color: #fff !important;
      text-decoration: none !important;
    }
    /* Design tokens for ms-control (easy tuning) */
    :root {
      --ms-width: 380px;
      --ms-max-width-vw: 30vw;
      --ms-padding: 12px;
      --ms-gap: 12px;
      --ms-radius: 8px;
      --ms-bg: #ffffff;
      --ms-border: #e6e6e6;
      --ms-shadow: 0 6px 18px rgba(0,0,0,0.12);
      --ms-accent: #1976d2;
      --ms-focus: #2684ff;
    }
    /* Control box (desktop + mobile pinned top-right) */
    .ms-control {
      position: fixed;
      top: 10px;
      right: 10px;
      left: auto;
      background: var(--ms-bg);
      padding: var(--ms-padding);
      border: 1px solid var(--ms-border);
      border-radius: var(--ms-radius);
      z-index: 10002;
      box-shadow: var(--ms-shadow);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      width: var(--ms-width);
      max-width: var(--ms-max-width-vw);
      max-height: 80vh;
      overflow: auto;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      gap: var(--ms-gap);
    }
    /* collapsed: show only header (title + filter); keep header fully visible */
    .ms-control.collapsed { height: auto; overflow: visible; }
    .ms-control.collapsed .ms-row,
    .ms-control.collapsed .ms-section { display: none !important; }
    /* when collapsed hide the right-hand info toggle under Filter */
    .ms-control.collapsed .ms-right-header .ms-toggle { display: none !important; }
    .ms-control-header { display:flex; align-items:center; justify-content:space-between; gap:8px; position:sticky; top:0; background: var(--ms-bg); z-index:10003; padding-top:6px; padding-bottom:8px; border-bottom:1px solid rgba(0,0,0,0.06); width:100%; box-sizing:border-box; flex-shrink:0; }
    .ms-control h3 { margin: 0 0 6px 0; font-size: 15px; font-weight: 700; display:inline-block; }
    .ms-title-main { font-size: 15px; font-weight: 700; white-space: nowrap; }
    .ms-title-sub { font-size: 12px; color: #555; margin-top: 2px; }
    .ms-top-header h3 { margin: 0; }
    .ms-top-header { display:flex; align-items:center; gap:8px; }
    .ms-right-header { display:flex; flex-direction:column; align-items:center; gap:6px; }
    .ms-collapse-btn { background: rgba(255,255,255,0.95); border: 1px solid rgba(0,0,0,0.06); font-size: 18px; padding: 8px; cursor: pointer; line-height: 1; position: absolute; top: 6px; right: 6px; z-index: 10010; touch-action: manipulation; -webkit-tap-highlight-color: transparent; pointer-events: auto; border-radius:6px; }
    .ms-open-sheet-btn { font-size:12px; padding:5px 8px; border-radius:6px; border:1px solid #ddd; background:#fff; cursor:pointer; }
    /* ensure top-right filter button matches desktop action widths */
    .ms-open-sheet-btn { min-width: 86px; width: 86px; box-sizing: border-box; }
    .ms-toggle { cursor: pointer; display: inline-flex; align-items: center; gap:8px; font-size:15px; color:#0b66c3; -webkit-user-select: none; user-select: none; }
    .ms-toggle .arrow { display: none; }
    /* Filter button: blue border when control is expanded, transparent when collapsed */
    .ms-control:not(.collapsed) .ms-open-sheet-btn { border-color: var(--ms-accent); box-shadow: 0 6px 18px rgba(25,118,210,0.08); }
    .ms-control.collapsed .ms-open-sheet-btn { border-color: rgba(0,0,0,0.12); box-shadow: none; }
    .ms-control button, .ms-control .ms-open-sheet-btn, .ms-control .ms-toggle { transition: background .15s, box-shadow .12s, transform .08s; }
    .ms-control button:focus, .ms-control .ms-open-sheet-btn:focus, .ms-control .ms-toggle:focus { outline: 2px solid var(--ms-focus); outline-offset: 2px; }
    .ms-toggle .arrow { display:none !important; transition: transform .15s ease; }
    .ms-toggle.open .arrow { transform: rotate(90deg); }
    .ms-modal { position: fixed; top:0; left:0; right:0; bottom:0; background: rgba(0,0,0,0.45); z-index:10000; display:flex; align-items:center; justify-content:center; }
    .ms-modal-content { background: #fff; padding: 18px 22px; border-radius:10px; max-width:700px; width:calc(100% - 40px); box-shadow: 0 8px 24px rgba(0,0,0,0.2); position:relative; }
    .ms-modal-close { position:absolute; top:8px; right:8px; border:none; background:transparent; font-size:18px; cursor:pointer; }
    .ms-modal-body { font-size:14px; line-height:1.6; }
    .ms-modal-title { font-weight: 700; }
    .ms-modal-section-title { font-weight: 700; }
    .ms-modal-row { display:flex; gap:16px; align-items:flex-start; margin-top:4px; flex-wrap:wrap; }
    .ms-modal-text { flex:1 1 60%; font-size:15px; line-height:1.5; }
    .ms-modal-image { flex:1 1 30%; display:flex; align-items:flex-start; justify-content:flex-end; }
    .ms-modal-logo-lg { max-width:180px; max-height:120px; height:auto; width:auto; border-radius:6px; }
    /* Bottom-sheet for mobile filters */
    .ms-bottom-sheet { position: fixed; left: 0; right: 0; bottom: 0; max-height: 80vh; background: #fff; box-shadow: 0 -8px 24px rgba(0,0,0,0.18); border-top-left-radius: 12px; border-top-right-radius: 12px; transform: translateY(100%); transition: transform .28s ease; z-index: 10004; overflow: auto; }
    .ms-bottom-sheet.open { transform: translateY(0%); }
    .ms-sheet-header { display:flex; align-items:center; justify-content:space-between; padding: 12px 16px; border-bottom:1px solid #eee; }
    .ms-sheet-handle { width:36px; height:4px; background:#ddd; border-radius:4px; margin:8px auto; }
    .ms-accordion-toggle { width:100%; text-align:left; padding:10px 14px; border:none; background:transparent; font-size:15px; display:flex; align-items:center; justify-content:space-between; cursor:pointer; }
    .ms-accordion-content { padding: 6px 14px 12px 14px; display:none; }
    .ms-accordion-content.open { display:block; }
    .ms-sheet-actions { padding:12px 16px; border-top:1px solid #eee; display:flex; align-items:center; justify-content:space-between; gap:8px; }
    .ms-sheet-actions button { padding:8px 12px; border-radius:6px; border:1px solid #1976d2; background:#1976d2; color:white; cursor:pointer; }
    .ms-control h4 { margin: 0 0 6px 0; font-size: 13px; }
    .ms-section { background:#f7f7f7; border-radius:8px; padding:8px 10px; margin-top:8px; }
    .ms-row { display:flex; flex-wrap:wrap; gap:8px; align-items:flex-start; margin: 6px 0; }
    .ms-filter-option { display:flex; align-items:center; }
    .ms-filter-swatch { display:inline-block; width:12px; height:12px; border-radius:50%; margin:0 0 0 6px; box-sizing:border-box; }
    .ms-filter-swatch-status { background:transparent; border:2px solid transparent; }
    .ms-reset-wrap {
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-areas:
        'left info'
        'submit submit';
      gap: 10px;
      align-items: stretch;
    }
    .ms-row-center { display:flex; align-items:center; }
    .ms-row-center-gap8 { display:flex; align-items:center; gap:8px; }
    .ms-col-start-gap6 { display:flex; flex-direction:column; align-items:stretch; gap:8px; grid-area: left; }
    .ms-col-center-gap6 { display:flex; flex-direction:column; align-items:stretch; gap:8px; grid-area: submit; }
    .ms-col-end-gap6 { display:flex; flex-direction:column; align-items:stretch; gap:8px; grid-area: info; justify-content:flex-start; }
    .ms-row-gap8-mt12 { margin-top:12px; display:flex; gap:8px; }
    .ms-row label { font-size: 12px; line-height:1.5; display:flex; align-items:center; flex:0 0 calc(50% - 8px); box-sizing:border-box; }
    .ms-value { margin-left: 10px; font-size: 14px; color: #222; }
    /* custom neutral checkbox: no colored fill, dark-gray checkmark only */
    .ms-control input[type=checkbox] {
      -webkit-appearance: none;
      appearance: none;
      width: 16px;
      height: 16px;
      border: 1.5px solid rgba(0,0,0,0.35);
      border-radius: 4px;
      background: transparent;
      display: inline-block;
      vertical-align: middle;
      position: relative;
      box-sizing: border-box;
    }
    .ms-control input[type=checkbox]:focus {
      outline: 2px solid rgba(38,132,255,0.18);
      outline-offset: 2px;
    }
    .ms-control input[type=checkbox]:checked::after {
      content: '';
      position: absolute;
      left: 4px;
      top: 1px;
      width: 6px;
      height: 10px;
      border: solid #424242;
      border-width: 0 2px 2px 0;
      transform: rotate(45deg);
      box-sizing: content-box;
    }
    .ms-all-toggle { display:flex; align-items:center; gap:8px; flex:0 0 100%; margin-bottom:4px; }
    .ms-all-toggle input[type=checkbox] { position:absolute; opacity:0; width:0; height:0; }
    .ms-all-track { width:32px; height:16px; border-radius:999px; background:#ccc; position:relative; flex-shrink:0; transition: background .15s ease; }
    .ms-all-thumb { position:absolute; top:2px; left:2px; width:12px; height:12px; border-radius:50%; background:#fff; box-shadow:0 0 2px rgba(0,0,0,0.4); transition: transform .15s ease; }
    .ms-all-toggle input[type=checkbox]:checked + .ms-all-track { background:#1976d2; }
    .ms-all-toggle input[type=checkbox]:checked + .ms-all-track .ms-all-thumb { transform: translateX(16px); }
    /* small submit button next to help */
    .ms-submit-btn { font-size:13px; padding:6px 8px; border-radius:6px; border:1px solid #1976d2; background:#fff; cursor:pointer; color:#1976d2; }
    .ms-submit-btn:hover { background: #f5fbff; }
    .ms-submit-cta { display:inline-block; padding:6px 10px; border-radius:6px; border:1px solid #1976d2; background:#1976d2; color:#fff; text-decoration:none; }
    .ms-submit-btn-neutral { background:#fff; color:var(--ms-accent); border:1px solid rgba(0,0,0,0.06); }
    .ms-feedback-link { display:inline-flex; align-items:center; gap:6px; padding:6px; border-radius:6px; border:1px solid rgba(0,0,0,0.06); background:#fff; color:var(--ms-accent); }
    .ms-feedback-icon { display:inline-flex; width:14px; height:14px; line-height: 1; }
    .ms-feedback-icon svg { width:14px; height:14px; display:block; fill: currentColor; }
    .ms-feedback-label { margin-left:6px; }
    .ms-more-info-copy-wrap { margin-bottom:4px; }
    .ms-info-btn-inline { display:inline-flex; align-items:center; gap:8px; padding:6px 10px; }
    .ms-info-icon { font-size:14px; line-height:1; color:#fff; }
    .ms-info-label { font-size:12px; color:#fff; }
    .ms-icon-plain-btn { background:none; border:none; padding:0; cursor:pointer; }
    .ms-data-source { margin-top:10px; font-size:11px; color:#555; }

    /* primary blue style for inline info button matching 'Filter anwenden' */
    .ms-info-btn { border: 1px solid var(--ms-accent); background: var(--ms-accent); color: #fff; box-shadow: 0 6px 18px rgba(25,118,210,0.08); }
    .ms-info-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 22px rgba(25,118,210,0.14); }
    .ms-submit-btn.ms-info-btn:hover { background: var(--ms-accent); color: #fff; transform: translateY(-2px); box-shadow: 0 10px 22px rgba(25,118,210,0.14); }
    .ms-info-btn span, .ms-info-btn small { color: #fff; }
    .ms-control button { min-height: 36px; }
    #ms-apply-desktop,
    #ms-reset,
    #ms-submit-btn,
    #ms-more-info-btn,
    #gb-feedback-control {
      width: 100%;
      min-width: 0;
      box-sizing: border-box;
      justify-content: center;
    }
    .ms-col-center-gap6 { margin-top: 2px; }
    .ms-col-center-gap6 .ms-row-center,
    .ms-col-end-gap6 .ms-row-center,
    .ms-col-end-gap6 .ms-more-info-copy-wrap {
      width: 100%;
    }
    .ms-badge {
      display: none;
      position: absolute;
      right: -4px;
      bottom: -4px;
      background: var(--ms-status-color, #9e9e9e);
      color: #fff;
      border-radius: 8px;
      font-size: 10px;
      line-height: 10px;
      padding: 2px 4px;
    }
    .ms-badge-visible { display: block; }
    .ms-width-match { width: var(--ms-match-width); min-width: var(--ms-match-width); box-sizing: border-box; }
    .ms-hidden { display: none !important; }

    /* Elegant button styles for filter controls */
    #ms-apply-desktop, #ms-apply-filters {
      font-size: 14px;
      padding: 8px 14px;
      border-radius: 10px;
      border: 1px solid transparent;
      background: var(--ms-accent);
      color: #fff;
      box-shadow: 0 4px 14px rgba(25,118,210,0.12);
      cursor: pointer;
      transition: transform .08s ease, box-shadow .12s ease, opacity .12s ease;
      min-width: 120px;
    }
    #ms-apply-desktop:hover, #ms-apply-filters:hover { transform: translateY(-2px); box-shadow: 0 10px 22px rgba(25,118,210,0.14); }
    #ms-reset {
      font-size: 13px;
      padding: 8px 12px;
      border-radius: 10px;
      background: transparent;
      color: var(--ms-accent);
      border: 1px solid rgba(25,118,210,0.14);
      cursor: pointer;
      transition: background .12s ease, transform .06s ease;
      min-width: 120px;
    }
    #ms-reset:hover { background: rgba(25,118,210,0.06); transform: translateY(-1px); }
    /* smaller submit CTA at bottom-right */
    #ms-submit-btn { padding: 8px 10px; border-radius: 10px; border: 1px solid rgba(0,0,0,0.06); background: #fff; color: var(--ms-accent); box-shadow: 0 2px 8px rgba(0,0,0,0.06); }
    #ms-submit-btn:hover { box-shadow: 0 6px 18px rgba(0,0,0,0.08); transform: translateY(-1px); }
    .leaflet-marker-icon.ms-div-icon {
      background: transparent !important;
      background-image: none !important;
      border: none !important;
      box-shadow: none !important;
      overflow: visible !important;
    }
    .leaflet-marker-icon.ms-div-icon::before,
    .leaflet-marker-icon.ms-div-icon::after { display: none !important; }
    /* subtle custom scrollbar for the control on desktop */
    .ms-control::-webkit-scrollbar { width: 8px; }
    .ms-control::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.12); border-radius:6px; }
    @media (max-width: 600px) {
      /* Pin control to top-right on mobile but show compact header and filter button */
      .ms-control { top: 10px; right: 10px; left: auto; bottom: auto; max-width: 92vw; border-radius: 10px; padding: 8px 10px; }
      .ms-control-header { align-items: flex-start; gap: 6px; }
      .ms-top-header { flex: 1 1 auto; min-width: 0; }
      .ms-title-main { white-space: normal; overflow-wrap: anywhere; line-height: 1.25; }
      .ms-right-header { flex: 0 0 auto; align-items: flex-end; }
      .ms-control.collapsed { height: auto; overflow: visible; }
      .ms-control.collapsed .ms-row, .ms-control.collapsed .ms-section { display: none !important; }
      .ms-control .ms-toggle { display: none; }
      .ms-control .ms-reset-wrap { display: none; }
      .ms-open-sheet-btn { display:inline-block; width:auto; min-width:0; max-width:100%; }
      /* ensure bottom-sheet is above most elements */
      .ms-bottom-sheet { z-index: 10005; }
      /* Modal layout adjustments for small screens: stack content and center logo */
      .ms-modal-content { max-width: 92vw; width: calc(100% - 24px); padding: 14px 16px; }
      .ms-modal-row { flex-direction: column; gap: 12px; }
      .ms-modal-image { flex: 0 0 auto; display:flex; justify-content:center; align-items:center; order: -1; }
      .ms-modal-text { flex: 1 1 100%; }
      .ms-modal-logo-lg { max-width:220px; max-height:140px; margin: 0 auto; }
      #ms-submit-btn-sheet {
        font-size: 12px;
        padding: 6px 10px;
        color: rgba(25,118,210,0.82);
        background: rgba(25,118,210,0.04);
        border-color: rgba(25,118,210,0.18);
        box-shadow: none;
        opacity: 0.9;
      }
      #ms-submit-btn-sheet:hover {
        transform: none;
        box-shadow: none;
        background: rgba(25,118,210,0.08);
      }
    }

.gb-modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;z-index:99999;}
.gb-modal-overlay.gb-open{display:flex;}
.gb-modal{background:#fff;border-radius:10px;max-width:420px;width:calc(100vw - 32px);box-shadow:0 10px 30px rgba(0,0,0,.25);padding:14px 16px;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;}
.gb-modal h3{margin:0 0 8px 0;font-size:16px;}
.gb-modal p{margin:0 0 10px 0;font-size:13px;line-height:1.35;color:#333;}
.gb-modal label{display:block;font-size:12px;color:#333;margin:8px 0 4px;}
.gb-modal input[type="text"], .gb-modal input[type="search"], .gb-modal input[type="email"], .gb-modal input[type="number"], .gb-modal textarea{width:100%;padding:8px 10px;border:1px solid #ccc;border-radius:8px;font-size:13px;}
.gb-modal .gb-error{display:none;color:#b00020;font-size:12px;margin-top:6px;}
.gb-modal .gb-error.gb-visible{display:block;}
.gb-modal .gb-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px;}
.gb-modal .gb-robot-wrap{margin-top:8px;}
.gb-modal .gb-modal-checkbox-inline{margin-left:8px;vertical-align:middle;}
.gb-modal button{border:0;border-radius:8px;padding:8px 10px;font-size:13px;cursor:pointer;}
.gb-modal .gb-cancel{background:#eee;color:#333;}
.gb-modal .gb-confirm{background:#1976d2;color:#fff;}
.gb-marker-counter{position:fixed;bottom:0;left:0;background:#fff;padding:4px;z-index:9999;}
